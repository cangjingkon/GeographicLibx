# $Id$
#
# Configure GeographicLib
#
# Set
#  GEOGRAPHICLIB_FOUND = TRUE
#  GeographicLib_INCLUDE_DIRS = /usr/local/include
#  GeographicLib_LIBRARIES = Geographic
#  GeographicLib_LIBRARY_DIRS = /usr/local/lib
#  GeographicLib_VERSION = 1.13 (for example)
#  GeographicLib_VERSION_{MAJOR,MINOR} = {1,13} (for example)

message (STATUS "Reading ${CMAKE_CURRENT_LIST_FILE}")
set (GeographicLib_VERSION_MAJOR "@GeographicLib_VERSION_MAJOR@")
set (GeographicLib_VERSION_MINOR "@GeographicLib_VERSION_MINOR@")
set (GeographicLib_VERSION "@GeographicLib_VERSION@")
message (STATUS "GeographicLib configuration, version "
  ${GeographicLib_VERSION})

# Tell the user project where to find our headers and libraries
if (IS_ABSOLUTE "@GEOGRAPHICLIB_ROOT_DIR@")
  set (GEOGRAPHICLIB_ROOT_DIR "@GEOGRAPHICLIB_ROOT_DIR@")
  set (GeographicLib_INCLUDE_DIRS "@GeographicLib_INCLUDE_DIRS@")
  set (GeographicLib_LIBRARY_DIRS "${GEOGRAPHICLIB_ROOT_DIR}/src")
else (IS_ABSOLUTE "@GEOGRAPHICLIB_ROOT_DIR@")
  get_filename_component (GEOGRAPHICLIB_SELF_DIR
    ${CMAKE_CURRENT_LIST_FILE} PATH)
  get_filename_component (GEOGRAPHICLIB_ROOT_DIR
    "${GEOGRAPHICLIB_SELF_DIR}/@GEOGRAPHICLIB_ROOT_DIR@" ABSOLUTE)
  set (GeographicLib_INCLUDE_DIRS "${GEOGRAPHICLIB_ROOT_DIR}/include")
  set (GeographicLib_LIBRARY_DIRS "${GEOGRAPHICLIB_ROOT_DIR}/lib")
endif (IS_ABSOLUTE "@GEOGRAPHICLIB_ROOT_DIR@")

foreach (p ${GeographicLib_INCLUDE_DIRS})
  # Only check first include dir
  if (NOT EXISTS "${p}/GeographicLib/Config.h")
    unset (GeographicLib_INCLUDE_DIRS)
    unset (GeographicLib_LIBRARY_DIRS)
    unset (GeographicLib_VERSION_MAJOR)
    unset (GeographicLib_VERSION_MINOR)
    unset (GeographicLib_VERSION_STRING)
  endif (NOT EXISTS "${p}/GeographicLib/Config.h")
  break (p ${GeographicLib_INCLUDE_DIRS})
endforeach (p ${GeographicLib_INCLUDE_DIRS})

if (DEFINED GeographicLib_INCLUDE_DIRS)
  include ("@GEOGRAPHICLIB_CMAKE_DIR@/GeographicLibDepends.cmake")
  set (GeographicLib_LIBRARIES Geographic)
endif (DEFINED GeographicLib_INCLUDE_DIRS)

include (FindPackageHandleStandardArgs)
find_package_handle_standard_args (GeographicLib DEFAULT_MSG
  GeographicLib_LIBRARY_DIRS GeographicLib_LIBRARIES GeographicLib_INCLUDE_DIRS)
mark_as_advanced (GeographicLib_LIBRARY_DIRS GeographicLib_LIBRARIES
  GeographicLib_INCLUDE_DIRS)
