=for comment $Id$

=head1 NAME

Gravity -- compute the earth's gravity field

=head1 SYNOPSIS

B<Gravity> [ B<-n> I<name> ] [ B<-d> I<dir> ]
[ B<-G> | B<-H> | B<-A> ] [ B<-c> I<lat> I<h> ]
[ B<-p> I<prec> ]
[ B<-v> ] [ B<--version> | B<-h> | B<--help> ]
[ B<--input-file> I<infile> | B<--input-string> I<instring> ]
[ B<--output-file> I<outfile> ]

=head1 DESCRIPTION

B<Gravity> reads and positions on standard input and prints out the
gravity field on standard output.

The input line is of the form I<lat> I<lon> I<h>.  I<lat> and I<lon> are
the latitude and longitude expressed as decimal degrees or degrees,
minutes, and seconds; see GeoConvert(1) for details.  I<h> is the height
above the ellipsoid in meters; this quantity is optional and defaults to
0.  Alternatively, the gravity field can be computed at various points
on a circle of latitude via the B<-c> option; in this case only the
longitude should be given on the input lines.

=over

=item B<-G>

computes gravity and the gravity disturbance.  The output consists of 6
items I<gx> I<gy> I<gz> I<deltax> I<deltay> I<deltaz> (all in m/s^2).

=item B<-H>

return the geoid height (meters).  In this case the I<h> should be zero.

=item B<-A>

computes the gravitational anomaly.  The output consists of 3 items
I<Dg01> I<xi> I<eta>, where I<Dg01> is in mGal (1 mGal = 10^-5 m/s^2)
and I<xi> and I<eta> are in arcseconds.

=back

=head1 OPTIONS

=over

=item B<-n>

use gravity field model I<name> instead of the default C<wmm2010>.  See
L<MODELS|models>.

=item B<-d>

read gravity models from I<dir> instead of the default.  See
L<MODELS|models>.

=item B<-G>

compute the acceleration due to gravity.

=item B<-H>

compute the height of the geoid abover the reference ellipsoid.

=item B<-A>

compute the gravity anomaly.

=item B<-c>

evaluate the field on a circle of latitude at I<lat>, I<h> instead of
reading these quantities from the input lines.  In this case, B<Gravity>
can calculate the field considerably quicker.  If geoid heights are
being computed (the B<-H> option), then I<h> must be zero.

=item B<-p>

set the precision to I<prec> (default 5).

=item B<-v>

print information about the gravity model on standard error before
processing the input.

=item B<--version>

print version and exit.

=item B<-h>

print usage, the default gravity path and name, and exit.

=item B<--help>

print full documentation and exit.

=item B<--input-file>

read input from the file I<infile> instead of from standard input; a file
name of "-" stands for standard input.

=item B<--input-string>

read input from the string I<instring> instead of from standard input.
All the semicolons in I<instring> are converted to newlines before the
reading begins.

=item B<--output-file>

write output to the file I<outfile> instead of to standard output; a
file name of "-" stands for standard output.

=back

=head1 MODELS

B<Gravity> computes the gravity field using one of the
following models

    wmm2010, the World Gravity Model 2010, which approximates the
      main gravity field for the period 2010–2015.  See
      http://ngdc.noaa.gov/geomag/WMM/DoDWMM.shtml
    igrf11, the International Gravity Reference Field (11th
      generation) which approximates the main gravity field for
      the period 1900–2015.  See
      http://ngdc.noaa.gov/IAGA/vmod/igrf.html
    emm2010, the Enhanced Gravity Model 2010, which approximates the
      main and crustal gravity fields for the period 2010–2015.  See
      http://ngdc.noaa.gov/geomag/EMM/index.html

These models approximate the gravity field due to the earth's core and
(in the case of emm2010) its crust.  They neglect gravity fields due to
the ionosphere, the magnetosphere, nearby magnetized materials,
electrical machinery, etc.

By default, the C<wmm2010> gravity model is used.  This may changed by
setting the environment variable C<GRAVITY_NAME> or with the B<-n>
option.

The gravity models will be loaded from a directory specified at compile
time.  This may changed by setting the environment variables
C<GRAVITY_PATH> or C<GEOGRAPHICLIB_DATA>, or with the B<-d> option.
The B<-h> option prints the default gravity path and name.  Use the
B<-v> option to ascertain the full path name of the data file.

Instructions for downloading and installing gravity models are
available at
L<http://geographiclib.sf.net/html/gravity.html#gravityinst>.

=head1 ENVIRONMENT

=over

=item B<GRAVITY_NAME>

Override the compile-time default gravity name of C<wmm2010>.  The B<-h>
option reports the value of B<GRAVITY_NAME>, if defined, otherwise it
reports the compile-time value.  If the B<-n> I<name> option is used,
then I<name> takes precedence.

=item B<GRAVITY_PATH>

Override the compile-time default gravity path.  This is typically
C</usr/local/share/GeographicLib/gravity> on Unix-like systems and
C<C:/Documents and Settings/All Users/Application
Data/GeographicLib/gravity> on Windows systems.  The B<-h> option reports
the value of B<GRAVITY_PATH>, if defined, otherwise it reports the
compile-time value.  If the B<-d> I<dir> option is used, then I<dir>
takes precedence.

=item B<GEOGRAPHICLIB_DATA>

Another way of overriding the compile-time default gravity path.  If it
is set (and if B<GRAVITY_PATH> is not set), then
$B<GEOGRAPHICLIB_DATA>/gravity is used.

=back

=head1 ERRORS

An illegal line of input will print an error message to standard output
beginning with C<ERROR:> and causes B<Gravity> to return an exit
code of 1.  However, an error does not cause B<Gravity> to
terminate; following lines will be converted.  If I<time> or I<h> are
outside the recommended ranges for the model (but inside the ranges
increase by I<tguard> and I<hguard>), a warning is printed on standard
error and the field (which may be inaccurate) is returned in the normal
way.

=head1 EXAMPLES

The gravity field from WMM2010 in Timbuktu on 2012-01-01

    echo 2012-01-01 "16d46'33N" "3d00'34W" 300 | Gravity -r
    => -2.55 12.43 33771.0 33737.6 -1500.5 7446.0 34582.1
       0.10 -0.07 34.3 36.8 54.4 -35.3 25.9

The first two numbers returned are the declination and inclination of
the field.  The second line gives the annual change.

=head1 SEE ALSO

GeoConvert(1).

=head1 AUTHOR

B<Gravity> was written by Charles Karney.

=head1 HISTORY

B<Gravity> was added to GeographicLib,
L<http://geographiclib.sf.net>, in version 1.16.
