=for comment $Id$

=head1 NAME

GeoidEval(1) - compute geoid heights

=head1 SYNOPSIS

  GeoidEval [-n name] [-d dir] [-l] [-a] [-c south west north east] \
            [-z zone] [--msltohae] [--haetomsl] [-v] [-h]
$Id$

Read in positions on standard input and print out the corresponding
geoid heights on standard output.  In addition print the northerly and
easterly gradients of the geoid height (i.e., the rate at which the
geoid height changes per unit distance along the WGS84 ellipsoid in
the specified directions).

Positions are given as latitude and longitude, UTM/UPS, or MGRS, in
any of the formats accepted by GeoConvert.  (MGRS coordinates signify
the center of the corresponing MGRS square.)  If the -z option is
specified then the specified zone is prepended to each line of input
(which must be in UTM/UPS coordinates).  This allows a file with UTM
eastings and northings in a single zone to be used as standard input.

With the --msltohae or --haetomsl options, each line of input should
also include a height (in meters) as the last item.  In this case the
height is converted in the indicated direction and the input line is
echoed to standard output with the height adjusted, thereby allowing
vertical datum of 3d data to be changed.  MSL is used here as a short
hand for the height above the geoid.  (Typically the geoid differs by
a few meters from mean sea level.)

The following geoids are supported (some may not be available):

                                  bilinear error    cubic error
   name         geoid    grid     max     rms       max     rms
   egm84-30     EGM84    30'      1.546m  70mm      0.274m  14mm
   egm84-15     EGM84    15'      0.413m  18mm      0.020m   1mm
   egm96-15     EGM96    15'      1.152m  40mm      0.169m   7mm
   egm96-5      EGM96     5'      0.140m   5mm      0.003m   1mm
   egm2008-5    EGM2008   5'      0.478m  12mm      0.294m   5mm
   egm2008-2_5  EGM2008   2.5'    0.135m   3mm      0.031m   1mm
   egm2008-1    EGM2008   1'      0.025m   1mm      0.003m   1mm

By default, the egm96-5 geoid is used.  This may changed by
setting the environment variable GEOID_NAME or with the -n option.  The
errors listed here are estimates of the quantization and interpolation
errors in the reported heights compared to the specified geoid.

Cubic interpolation is used to compute the geoid height unless
-l is specified in which case bilinear interpolation is used.
Cubic interpolation is more accurate; however it results in
small discontinuities in the returned height on cell boundaries.
The gradients are computed by differentiating the interpolated
results.

The geoid data will be loaded from the directory,
/usr/local/share/GeographicLib/geoids.  This may changed
by setting the environment variable GEOID_PATH or with the -d option.

By default, the data file is randomly read to compute the geoid
heights at the input positions.  Usually this is sufficient for
interactive use.  If many heights are to be computed, GeoidEval
allows a block of data to be read into memory and heights within the
corresponding rectangle can then be computed without any disk access.
If -a is specified all the geoid data is read; in the case of
egm2008-1, this requires about 0.5 GB of RAM.  The -c option allows
a rectangle of data to be cached.  The evaluation of heights
outside the cached rectangle causes the necessary data to be read
from disk.

Regardless of whether any cache is requested (with the -a or -c
options), the data for the last grid cell in cached.  This allows
the geoid height along a continuous path to be returned with little
disk overhead.

The -v option causes the data about the current geoid to be printed
to standard error.

-h prints this help.
