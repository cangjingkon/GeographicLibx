=for comment $Id$

=head1 NAME

Geod(1) -- perform geodesic calculations

=head1 SYNOPSIS

B<Geod> [ B<-i> | B<-l> I<lat1> I<lon1> I<azi1> ] [ B<-a> ] [ B<-e> I<a> I<r> ]
[ B<-d> ] [ B<-b> ] [ B<-f> ] [ B<-p> I<prec> ] [ B<-h> | B<--help>]

=head1 DESCRIPTION

The shortest path between two points on the ellipsoid at (I<lat1>,
I<lon1>) and (I<lat2>, I<lon2>) is called the geodesic.  Its length is
I<s12> and the geodesic from point 1 to point 2 has azimuths I<azi1> and
I<azi2> at the two end points.  The reduced length of the
geodesic, I<m12>, is defined such that if the initial azimuth is
perturbed by dI<azi1> (radians) then the second point is displaced by
I<m12>*dI<azi1> in the direction perpendicular to the geodesic.  On a
flat surface, we have I<m12> = I<s12>.

B<Geod> operates in one of three modes:

=over

=item 1.

By default, B<Geod> accepts lines on the standard input containing
I<lat1> I<lon1> I<azi1> I<s12> and prints I<lat2> I<lon2> I<azi2> I<m12>
on standard output.  This is the direct geodesic calculation.

=item 2.

Command line arguments B<-l> I<lat1> I<lon1> I<azi1> specify a geodesic line.
B<Geod> then accepts a sequence of I<s12> values (one per line) on
standard input and prints I<lat2> I<lon2> I<azi2> I<m12> for each.  This
generates a sequence of points on a single geodesic.

=item 3.

With the B<-i> command line argument, B<Geod> performs the inverse
geodesic calculation.  It reads lines containing I<lat1> I<lon1> I<lat2>
I<lon2> and prints the corresponding values of I<azi1> I<azi2> I<s12> I<m12>.

=back

=head1 OPTIONS

=over

=item B<-i>

perform an inverse geodesic calculation (see 3 above).

=item B<-l>

line mode (see 2 above); generate a sequence of points along the
geodesic specified by I<lat1> I<lon1> I<azi1>.

=item B<-a>

arc mode; on input I<and> output I<s12> is replaced by I<a12> the arc
length (in degrees) on the auxiliary sphere.  See L<AUXILIARY SPHERE>.

=item B<-e>

specify the ellipsoid via I<a> I<r>; the equatorial radius is I<a> and
the reciprocal flattening is I<r>.  Setting I<r> = 0 results in a
sphere.  Specify I<r> E<lt> 0 for a prolate ellipsoid.  By default, the
WGS84 ellipsoid is used, I<a> = 6378137m, I<r> = 298.257223563.

=item B<-d>

output angles as degrees, minutes, seconds instead of decimal degrees.

=item B<-b>

report the I<back> azimuth at point 2 instead of the forward azimuth.

=item B<-f>

full output; each line of output consists of 9 quantities: I<lat1>
I<lon1> I<azi1> I<lat2> I<lon2> I<azi2> I<s12> I<a12> I<m12>.

=item B<-p>

set the precision to I<prec> (default 3); I<prec> is the precision
relative to 1m.  See L<PRECISION|precision>.

=item B<-h>

print usage.

=item B<--help>

print full documentation.

=back

=head1 INPUT

B<Geod> measures all angles in degrees and all lengths (I<s12>, I<m12>)
in meters.  On input angles (latitude, longitude, azimuth, arc length)
can be as decimal degrees or degrees (d), minutes ('), seconds (").  A
decimal point can only appear in the least significant component and the
designator (d, ', or ") for this component is optional; thus C<40d30>,
C<40d30'>, C<40.5d>, and C<40.5> are all equivalent.  By default,
latitude precedes longitude for each point; however on input either may
be given first by appending (or prepending) I<N> or I<S> to the latitude
and I<E> or I<W> to the longitude.  Azimuths are measured clockwise from
north; however this may be overridden with I<E> or I<W>.

=head1 AUXILIARY SPHERE

Geodesics on the ellipsoid can be transferred to the I<auxiliary sphere>
on which the distance is measured in terms of the arc length I<a12>
(measured in degrees) instead of I<s12>.  In terms of I<a12>, 180
degrees is the distance from one equator crossing to the next or from
the minimum latitude to the maximum latitude.  Geodesics with I<a12>
E<gt> 180 degrees do not correspond to shortest paths.  With the B<-a>
flag, I<s12> (on both input and output) is replaced by I<a12>.  The
B<-a> flag does I<not> affect the full output given by the B<-f> flag
(which always includes both I<s12> and I<a12>).  I<m12> is always given
in meters.

=head1 PRECISION

I<prec> gives precision of
the output with I<prec> = 0 giving 1m precision, I<prec> = 3 giving 1mm
precision, etc.  I<prec> is the number of digits after the decimal point
for lengths.  For decimal degrees, the number of digits after the
decimal point is 5 + I<prec>.  For DMS (degree, minute, seconds) output,
the number of digits after the decimal point in the seconds component
is 1 + I<prec>.  The minimum value of I<prec> is 0 and the maximum is 10.

=head1 ERRORS

An illegal line of input will print an error message beginning with
C<ERROR:> and causes B<Geod> to return an exit code of 1.  However, an
error does not cause B<Geod> to terminate; following lines will be
converted.

=head1 EXAMPLES

Route from JFK Airport to Singapore Changi Airport:

   echo "40d38'23N" "073d46'44W" "01d21'33N" "103d59'22E" |
   Geod -i -d -p 0

   003d18'29.9" 177d29'09.2" 15347628 4302458

Waypoints on the route at intervals of 2000km:

   for ((i = 0; i <= 16; i += 2)); do echo ${i}000000;done |
   Geod -l "40d38'23N" "073d46'44W" "003d18'29.9" -d -p 0

   40d38'23.0"N 073d46'44.0"W 003d18'29.9" 0
   58d34'45.1"N 071d49'36.7"W 004d48'48.8" 1967419
   76d22'28.4"N 065d32'17.8"W 010d41'38.4" 3743642
   84d50'28.0"N 075d04'39.2"E 150d55'00.9" 5156905
   67d26'20.3"N 098d00'51.2"E 173d27'20.3" 6070415
   49d33'03.2"N 101d06'52.6"E 176d07'54.3" 6394568
   31d34'16.5"N 102d30'46.3"E 177d03'08.4" 6095725
   13d31'56.0"N 103d26'50.7"E 177d24'55.0" 5200700
   04d32'05.7"S 104d14'48.7"E 177d28'43.6" 3795596

=head1 SEE ALSO

B<Geod> is a part of GeographicLib, L<http://geographiclib.sf.net>.
